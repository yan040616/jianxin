<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>发声练习 - YNU-健心</title>
    <link href="./output.css" rel="stylesheet">
    <style>
        .waveform-bar {
            transition: height 0.2s ease-in-out;
        }
    </style>
</head>
<body class="bg-gray-200 flex justify-center items-center min-h-screen">
    <!-- Phone Mockup -->
    <div class="w-[390px] h-[844px] bg-[#F0F2FE] shadow-2xl rounded-[40px] overflow-hidden relative font-sans flex flex-col">
        
        <!-- Header with Back Button -->
        <header class="absolute top-0 left-0 right-0 p-4 z-20 flex items-center justify-between">
            <a href="activities.html" class="w-10 h-10 bg-white/40 backdrop-blur-xl rounded-full flex items-center justify-center shadow-md border border-white/50">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-800" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                </svg>
            </a>
            <h1 class="text-lg font-bold text-gray-800">发声练习</h1>
            <div class="w-10"></div>
        </header>
        
        <!-- Background Gradient Shapes -->
        <div class="absolute top-0 left-0 w-64 h-64 bg-gradient-to-br from-sky-200 to-transparent opacity-40 rounded-full -translate-x-1/4 -translate-y-1/4"></div>
        <div class="absolute bottom-0 right-0 w-64 h-64 bg-gradient-to-tl from-blue-200 to-transparent opacity-40 rounded-full translate-x-1/4 translate-y-1/4"></div>

        <!-- Main Content -->
        <main class="relative z-10 flex flex-col flex-1 items-center justify-center p-6 text-center space-y-8">
            <p class="text-gray-600">点击下方的按钮，开始发声练习，<br>将内心的情绪释放出来。</p>

            <!-- Waveform Animation -->
            <div id="waveform" class="w-full h-32 flex items-center justify-center gap-1">
                <!-- Bars will be generated by JS -->
            </div>

            <p id="timer" class="text-3xl font-mono font-bold text-gray-900">00:00</p>
        </main>
        
        <!-- Footer Controls -->
        <footer class="p-8 z-10">
            <button id="record-btn" class="w-20 h-20 mx-auto bg-red-500 rounded-full flex items-center justify-center shadow-lg transition-colors duration-200">
                <!-- Icon will be injected by JS -->
            </button>
        </footer>
    </div>
    <script>
        const timerEl = document.getElementById('timer');
        const recordBtn = document.getElementById('record-btn');
        const waveformContainer = document.getElementById('waveform');
        
        const recordIcon = `<svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" fill="currentColor" viewBox="0 0 20 20"><path d="M7 4a3 3 0 016 0v6a3 3 0 11-6 0V4z" /><path d="M5.5 10.5a.5.5 0 01.5-.5h8a.5.5 0 010 1H6a.5.5 0 01-.5-.5z" /><path d="M10 18a5 5 0 005-5h-1a4 4 0 01-8 0H5a5 5 0 005 5z" /></svg>`;
        const stopIcon = `<svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" fill="currentColor" viewBox="0 0 20 20"><rect x="7" y="7" width="6" height="6" rx="1" /></svg>`;

        let seconds = 0;
        let timerInterval = null;
        let waveformInterval = null;
        let isRecording = false;

        // Generate initial bars
        for (let i = 0; i < 24; i++) {
            const bar = document.createElement('div');
            bar.classList.add('w-1.5', 'bg-blue-400', 'rounded-full', 'waveform-bar');
            bar.style.height = '10%';
            waveformContainer.appendChild(bar);
        }
        const bars = waveformContainer.children;

        function formatTime(sec) {
            const minutes = Math.floor(sec / 60);
            const seconds = sec % 60;
            return `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        }

        function animateWaveform() {
            for(let bar of bars) {
                const newHeight = Math.random() * 80 + 10;
                bar.style.height = `${newHeight}%`;
            }
        }

        function stopWaveform() {
            for(let bar of bars) {
                bar.style.height = '10%';
            }
        }
        
        function updateButton() {
            if(isRecording) {
                recordBtn.innerHTML = stopIcon;
                recordBtn.classList.remove('bg-red-500');
                recordBtn.classList.add('bg-gray-600');
            } else {
                recordBtn.innerHTML = recordIcon;
                recordBtn.classList.remove('bg-gray-600');
                recordBtn.classList.add('bg-red-500');
            }
        }

        recordBtn.addEventListener('click', () => {
            isRecording = !isRecording;
            if(isRecording) {
                // Start recording
                seconds = 0;
                timerEl.textContent = formatTime(seconds);
                timerInterval = setInterval(() => {
                    seconds++;
                    timerEl.textContent = formatTime(seconds);
                }, 1000);
                waveformInterval = setInterval(animateWaveform, 200);
            } else {
                // Stop recording
                clearInterval(timerInterval);
                clearInterval(waveformInterval);
                stopWaveform();
            }
            updateButton();
        });

        // Initial State
        updateButton();
    </script>
</body>
</html> 